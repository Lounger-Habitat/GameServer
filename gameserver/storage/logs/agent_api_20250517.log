2025-05-17 15:13:35,384 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:13:35,385 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:13:35,386 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:13:35,386 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:13:35,390 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:13:35,391 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:13:35,391 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:13:35,392 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:13:35,482 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/own/Workspace/GameServer']
2025-05-17 15:13:35,483 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-05-17 15:13:35,484 - uvicorn.error - INFO - Started reloader process [67558] using WatchFiles
2025-05-17 15:13:35,921 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:13:35,923 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:13:35,923 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:13:35,924 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:13:35,926 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:13:35,927 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:13:35,927 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:13:35,927 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:13:35,937 - uvicorn.error - INFO - Started server process [67560]
2025-05-17 15:13:35,938 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:13:35,939 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:14:06,051 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:06,053 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:14:06,133 - uvicorn.error - INFO - Shutting down
2025-05-17 15:14:06,236 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:14:06,236 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:14:06,237 - uvicorn.error - INFO - Finished server process [67560]
2025-05-17 15:14:06,598 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:06,620 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:14:06,622 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:06,623 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:06,623 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:06,626 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:14:06,626 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:06,627 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:06,628 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:06,639 - uvicorn.error - INFO - Started server process [67715]
2025-05-17 15:14:06,641 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:14:06,642 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:14:14,963 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:14,965 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:14:15,021 - uvicorn.error - INFO - Shutting down
2025-05-17 15:14:15,124 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:14:15,125 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:14:15,126 - uvicorn.error - INFO - Finished server process [67715]
2025-05-17 15:14:15,492 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:15,559 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:14:15,560 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:15,561 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:15,561 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:15,564 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:14:15,565 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:15,565 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:15,565 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:15,574 - uvicorn.error - INFO - Started server process [67772]
2025-05-17 15:14:15,575 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:14:15,575 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:14:37,888 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:37,889 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:14:37,986 - uvicorn.error - INFO - Shutting down
2025-05-17 15:14:38,090 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:14:38,092 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:14:38,094 - uvicorn.error - INFO - Finished server process [67772]
2025-05-17 15:14:38,404 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:14:38,405 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:38,406 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:38,406 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:38,409 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:14:38,409 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:38,410 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:38,410 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:38,417 - uvicorn.error - INFO - Started server process [67880]
2025-05-17 15:14:38,418 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:14:38,419 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:14:38,464 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:42,011 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:14:42,012 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:14:42,057 - uvicorn.error - INFO - Shutting down
2025-05-17 15:14:42,159 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:14:42,162 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:14:42,164 - uvicorn.error - INFO - Finished server process [67880]
2025-05-17 15:14:42,488 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:14:42,489 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:42,489 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:42,490 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:42,492 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:14:42,493 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:14:42,493 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:14:42,494 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:14:42,501 - uvicorn.error - INFO - Started server process [67908]
2025-05-17 15:14:42,502 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:14:42,502 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:14:42,534 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:16:13,656 - uvicorn.error - INFO - ('127.0.0.1', 56480) - "WebSocket /ws/env/1?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeCJ9.Gb_y2viQzURkq9cTmP9bdE6I_c1RZZcKLrnZgluLZP0" 403
2025-05-17 15:16:13,660 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:16:13,662 - uvicorn.error - INFO - connection closed
2025-05-17 15:16:41,038 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:16:42,982 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:18:27,078 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:18:27,079 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:18:27,169 - uvicorn.error - INFO - Shutting down
2025-05-17 15:18:27,271 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:18:27,272 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:18:27,273 - uvicorn.error - INFO - Finished server process [67908]
2025-05-17 15:18:27,636 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:18:27,719 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:18:27,720 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:18:27,721 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:18:27,721 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:18:27,724 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:18:27,724 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:18:27,725 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:18:27,725 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:18:27,734 - uvicorn.error - INFO - Started server process [69005]
2025-05-17 15:18:27,735 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:18:27,735 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:18:29,648 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:18:29,649 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:18:29,651 - uvicorn.error - INFO - Shutting down
2025-05-17 15:18:29,753 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:18:29,754 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:18:29,755 - uvicorn.error - INFO - Finished server process [69005]
2025-05-17 15:18:30,078 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:18:30,080 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:18:30,080 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:18:30,081 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:18:30,084 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:18:30,084 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:18:30,085 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:18:30,085 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:18:30,093 - uvicorn.error - INFO - Started server process [69024]
2025-05-17 15:18:30,093 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:18:30,094 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:18:30,120 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:18:34,214 - uvicorn.error - INFO - ('127.0.0.1', 56708) - "WebSocket /ws/env/1?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeCJ9.Gb_y2viQzURkq9cTmP9bdE6I_c1RZZcKLrnZgluLZP0" 403
2025-05-17 15:18:34,219 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:18:34,221 - uvicorn.error - INFO - connection closed
2025-05-17 15:18:59,797 - uvicorn.error - INFO - ('127.0.0.1', 56745) - "WebSocket /ws/env/1?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeCJ9.Gb_y2viQzURkq9cTmP9bdE6I_c1RZZcKLrnZgluLZP0" 403
2025-05-17 15:18:59,802 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:18:59,804 - uvicorn.error - INFO - connection closed
2025-05-17 15:19:43,051 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:19:44,824 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:20:09,564 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:20:09,565 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:20:09,598 - uvicorn.error - INFO - Shutting down
2025-05-17 15:20:09,700 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:20:09,701 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:20:09,702 - uvicorn.error - INFO - Finished server process [69024]
2025-05-17 15:20:10,067 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:20:10,077 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:20:10,079 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:20:10,079 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:20:10,079 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:20:10,083 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:20:10,083 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:20:10,084 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:20:10,084 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:20:10,094 - uvicorn.error - INFO - Started server process [69518]
2025-05-17 15:20:10,095 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:20:10,095 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:22:44,905 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:22:46,726 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:22:52,541 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:22:52,543 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:22:52,616 - uvicorn.error - INFO - Shutting down
2025-05-17 15:22:52,718 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:22:52,718 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:22:52,719 - uvicorn.error - INFO - Finished server process [69518]
2025-05-17 15:22:53,084 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:22:53,118 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:22:53,120 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:22:53,121 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:22:53,121 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:22:53,125 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:22:53,125 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:22:53,126 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:22:53,126 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:22:53,139 - uvicorn.error - INFO - Started server process [70342]
2025-05-17 15:22:53,140 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:22:53,142 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:22:53,450 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:22:55,780 - uvicorn.error - INFO - ('127.0.0.1', 57072) - "WebSocket /ws/env/1?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeCJ9.Gb_y2viQzURkq9cTmP9bdE6I_c1RZZcKLrnZgluLZP0" 403
2025-05-17 15:22:55,784 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:22:55,786 - uvicorn.error - INFO - connection closed
2025-05-17 15:23:04,884 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:23:04,885 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:23:04,958 - uvicorn.error - INFO - Shutting down
2025-05-17 15:23:05,061 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:23:05,063 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:23:05,065 - uvicorn.error - INFO - Finished server process [70342]
2025-05-17 15:23:05,432 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:23:05,441 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:23:05,442 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:23:05,443 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:23:05,443 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:23:05,446 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:23:05,446 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:23:05,447 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:23:05,447 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:23:05,457 - uvicorn.error - INFO - Started server process [70411]
2025-05-17 15:23:05,457 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:23:05,458 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:23:05,790 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:23:08,612 - uvicorn.error - INFO - ('127.0.0.1', 57087) - "WebSocket /ws/env/1?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjeCJ9.Gb_y2viQzURkq9cTmP9bdE6I_c1RZZcKLrnZgluLZP0" 403
2025-05-17 15:23:08,616 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:23:08,618 - uvicorn.error - INFO - connection closed
2025-05-17 15:24:08,840 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:24:08,841 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:24:08,887 - uvicorn.error - INFO - Shutting down
2025-05-17 15:24:08,989 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:24:08,990 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:24:08,991 - uvicorn.error - INFO - Finished server process [70411]
2025-05-17 15:24:09,282 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:24:09,284 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:09,284 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:09,284 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:09,287 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:24:09,287 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:09,288 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:09,288 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:09,295 - uvicorn.error - INFO - Started server process [70710]
2025-05-17 15:24:09,296 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:24:09,297 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:24:09,348 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:24:13,471 - uvicorn.error - INFO - ('127.0.0.1', 57160) - "WebSocket /ws/env/1" 403
2025-05-17 15:24:13,473 - uvicorn.error - INFO - connection rejected (403 Forbidden)
2025-05-17 15:24:13,474 - uvicorn.error - INFO - connection closed
2025-05-17 15:24:28,583 - uvicorn.error - INFO - Shutting down
2025-05-17 15:24:28,687 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:24:28,691 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:24:28,693 - uvicorn.error - INFO - Finished server process [70710]
2025-05-17 15:24:28,701 - uvicorn.error - INFO - Stopping reloader process [67558]
2025-05-17 15:24:29,667 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:24:29,668 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:29,668 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:29,669 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:29,671 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:24:29,672 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:29,672 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:29,672 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:29,729 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/own/Workspace/GameServer']
2025-05-17 15:24:29,730 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-05-17 15:24:29,731 - uvicorn.error - INFO - Started reloader process [70867] using WatchFiles
2025-05-17 15:24:30,014 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:24:30,016 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:30,016 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:30,017 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:30,019 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:24:30,019 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:24:30,020 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:24:30,020 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:24:30,028 - uvicorn.error - INFO - Started server process [70870]
2025-05-17 15:24:30,028 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:24:30,029 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:25:16,368 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:25:16,371 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/router.py'. Reloading...
2025-05-17 15:25:16,405 - uvicorn.error - INFO - Shutting down
2025-05-17 15:25:16,507 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:25:16,508 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:25:16,509 - uvicorn.error - INFO - Finished server process [70870]
2025-05-17 15:25:16,879 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:25:16,890 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:25:16,891 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:25:16,891 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:25:16,892 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:25:16,895 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:25:16,895 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:25:16,896 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:25:16,896 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:25:16,904 - uvicorn.error - INFO - Started server process [71107]
2025-05-17 15:25:16,905 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:25:16,905 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:25:17,243 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:25:26,620 - uvicorn.error - INFO - ('127.0.0.1', 57273) - "WebSocket /ws/env/1" [accepted]
2025-05-17 15:25:26,623 - uvicorn.error - INFO - connection open
2025-05-17 15:25:34,507 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 305, in env_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1000, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 326, in env_websocket_endpoint
    manager.disconnect(websocket, env_id)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 170, in disconnect
    if agent_id is not None and agent_id in self.agent_connections[env_id]:
                                            ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: None
2025-05-17 15:25:34,742 - uvicorn.error - INFO - connection closed
2025-05-17 15:25:46,770 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:25:49,818 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:27:36,889 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:27:36,890 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:27:36,945 - uvicorn.error - INFO - Shutting down
2025-05-17 15:27:37,048 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:27:37,049 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:27:37,050 - uvicorn.error - INFO - Finished server process [71107]
2025-05-17 15:27:37,355 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:27:37,357 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:27:37,357 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:27:37,358 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:27:37,360 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:27:37,361 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:27:37,361 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:27:37,361 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:27:37,370 - uvicorn.error - INFO - Started server process [71793]
2025-05-17 15:27:37,370 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:27:37,371 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:27:37,467 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:27:42,000 - uvicorn.error - INFO - ('127.0.0.1', 57431) - "WebSocket /ws/env/1" [accepted]
2025-05-17 15:27:42,004 - uvicorn.error - INFO - connection open
2025-05-17 15:27:54,783 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 305, in env_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1000, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 326, in env_websocket_endpoint
    manager.disconnect(websocket, env_id)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 171, in disconnect
    del self.agent_connections[env_id][agent_id]
        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: None
2025-05-17 15:27:55,014 - uvicorn.error - INFO - connection closed
2025-05-17 15:29:16,629 - uvicorn.error - INFO - ('127.0.0.1', 57572) - "WebSocket /ws/env/1" [accepted]
2025-05-17 15:29:16,633 - uvicorn.error - INFO - connection open
2025-05-17 15:29:22,526 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:29:25,109 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:29:34,115 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:29:34,117 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env copy.py'. Reloading...
2025-05-17 15:29:34,190 - uvicorn.error - INFO - Shutting down
2025-05-17 15:29:34,192 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 305, in env_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1012, None)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 326, in env_websocket_endpoint
    manager.disconnect(websocket, env_id)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 171, in disconnect
    del self.agent_connections[env_id][agent_id]
        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: None
2025-05-17 15:29:34,394 - uvicorn.error - INFO - connection closed
2025-05-17 15:29:34,395 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:29:34,395 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:29:34,396 - uvicorn.error - INFO - Finished server process [71793]
2025-05-17 15:29:34,757 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:29:34,768 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:29:34,770 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:29:34,771 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:29:34,771 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:29:34,775 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:29:34,776 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:29:34,776 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:29:34,776 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:29:34,786 - uvicorn.error - INFO - Started server process [72455]
2025-05-17 15:29:34,787 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:29:34,787 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:29:42,279 - watchfiles.main - INFO - 2 changes detected
2025-05-17 15:29:42,284 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env copy.py', 'examples/demo_ws_rotk_agent.py'. Reloading...
2025-05-17 15:29:42,360 - uvicorn.error - INFO - Shutting down
2025-05-17 15:29:42,463 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:29:42,464 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:29:42,465 - uvicorn.error - INFO - Finished server process [72455]
2025-05-17 15:29:42,768 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:29:42,769 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:29:42,770 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:29:42,770 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:29:42,773 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:29:42,773 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:29:42,774 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:29:42,774 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:29:42,781 - uvicorn.error - INFO - Started server process [72504]
2025-05-17 15:29:42,781 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:29:42,782 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:29:42,831 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:29:59,849 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:29:59,850 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_agent.py'. Reloading...
2025-05-17 15:29:59,946 - uvicorn.error - INFO - Shutting down
2025-05-17 15:30:00,051 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:30:00,053 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:30:00,055 - uvicorn.error - INFO - Finished server process [72504]
2025-05-17 15:30:00,379 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:30:00,381 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:30:00,381 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:30:00,381 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:30:00,384 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:30:00,385 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:30:00,385 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:30:00,386 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:30:00,393 - uvicorn.error - INFO - Started server process [72590]
2025-05-17 15:30:00,394 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:30:00,394 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:30:00,424 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:31:48,453 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:31:48,455 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:31:48,536 - uvicorn.error - INFO - Shutting down
2025-05-17 15:31:48,638 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:31:48,640 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:31:48,641 - uvicorn.error - INFO - Finished server process [72590]
2025-05-17 15:31:49,005 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:31:49,032 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:31:49,034 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:31:49,034 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:31:49,035 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:31:49,038 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:31:49,038 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:31:49,039 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:31:49,039 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:31:49,050 - uvicorn.error - INFO - Started server process [73109]
2025-05-17 15:31:49,051 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:31:49,051 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:31:49,364 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:32:02,284 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:32:02,286 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_agent.py'. Reloading...
2025-05-17 15:32:02,308 - uvicorn.error - INFO - Shutting down
2025-05-17 15:32:02,410 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:32:02,411 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:32:02,412 - uvicorn.error - INFO - Finished server process [73109]
2025-05-17 15:32:02,778 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:32:02,812 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:32:02,814 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:32:02,814 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:32:02,814 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:32:02,817 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:32:02,818 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:32:02,818 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:32:02,818 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:32:02,826 - uvicorn.error - INFO - Started server process [73187]
2025-05-17 15:32:02,827 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:32:02,828 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:32:12,353 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:32:12,355 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_agent.py'. Reloading...
2025-05-17 15:32:12,420 - uvicorn.error - INFO - Shutting down
2025-05-17 15:32:12,524 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:32:12,530 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:32:12,532 - uvicorn.error - INFO - Finished server process [73187]
2025-05-17 15:32:12,845 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:32:12,847 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:32:12,847 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:32:12,847 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:32:12,850 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:32:12,850 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:32:12,851 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:32:12,851 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:32:12,858 - uvicorn.error - INFO - Started server process [73235]
2025-05-17 15:32:12,858 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:32:12,859 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:32:12,905 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:32:50,277 - uvicorn.error - INFO - ('127.0.0.1', 58125) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:32:50,281 - uvicorn.error - INFO - connection open
2025-05-17 15:33:41,252 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 370, in agent_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1000, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 424, in agent_websocket_endpoint
    await manager.broadcast_to_game(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RoTKConnectionManager' object has no attribute 'broadcast_to_game'. Did you mean: 'broadcast_to_agent'?
2025-05-17 15:33:41,482 - uvicorn.error - INFO - connection closed
2025-05-17 15:33:44,068 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:33:46,796 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:35:13,056 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:35:13,058 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:35:13,114 - uvicorn.error - INFO - Shutting down
2025-05-17 15:35:13,216 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:35:13,217 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:35:13,217 - uvicorn.error - INFO - Finished server process [73235]
2025-05-17 15:35:13,579 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:35:13,624 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:35:13,626 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:35:13,626 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:35:13,627 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:35:13,630 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:35:13,630 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:35:13,630 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:35:13,631 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:35:13,640 - uvicorn.error - INFO - Started server process [74106]
2025-05-17 15:35:13,640 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:35:13,641 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:35:13,946 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:36:24,586 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:36:24,587 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:36:24,626 - uvicorn.error - INFO - Shutting down
2025-05-17 15:36:24,728 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:36:24,729 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:36:24,730 - uvicorn.error - INFO - Finished server process [74106]
2025-05-17 15:36:25,043 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:36:25,045 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:36:25,045 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:36:25,045 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:36:25,048 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:36:25,049 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:36:25,049 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:36:25,049 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:36:25,058 - uvicorn.error - INFO - Started server process [74448]
2025-05-17 15:36:25,059 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:36:25,059 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:36:25,147 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:36:46,825 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:36:49,170 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:37:04,589 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:37:04,590 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:37:04,671 - uvicorn.error - INFO - Shutting down
2025-05-17 15:37:04,773 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:37:04,774 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:37:04,775 - uvicorn.error - INFO - Finished server process [74448]
2025-05-17 15:37:05,089 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:37:05,091 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:37:05,091 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:37:05,092 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:37:05,094 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:37:05,095 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:37:05,095 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:37:05,096 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:37:05,105 - uvicorn.error - INFO - Started server process [74662]
2025-05-17 15:37:05,105 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:37:05,106 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:37:05,193 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:37:05,716 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:37:05,717 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:37:05,813 - uvicorn.error - INFO - Shutting down
2025-05-17 15:37:05,915 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:37:05,917 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:37:05,918 - uvicorn.error - INFO - Finished server process [74662]
2025-05-17 15:37:06,236 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:37:06,238 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:37:06,238 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:37:06,239 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:37:06,241 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:37:06,242 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:37:06,242 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:37:06,242 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:37:06,253 - uvicorn.error - INFO - Started server process [74672]
2025-05-17 15:37:06,254 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:37:06,255 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:37:06,339 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:38:01,153 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:38:01,154 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:38:01,198 - uvicorn.error - INFO - Shutting down
2025-05-17 15:38:01,299 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:38:01,300 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:38:01,301 - uvicorn.error - INFO - Finished server process [74672]
2025-05-17 15:38:01,623 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:38:01,626 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:38:01,626 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:38:01,626 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:38:01,629 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:38:01,630 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:38:01,630 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:38:01,631 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:38:01,642 - uvicorn.error - INFO - Started server process [74939]
2025-05-17 15:38:01,643 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:38:01,644 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:38:01,720 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:38:16,641 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:38:16,642 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:38:16,690 - uvicorn.error - INFO - Shutting down
2025-05-17 15:38:16,793 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:38:16,795 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:38:16,797 - uvicorn.error - INFO - Finished server process [74939]
2025-05-17 15:38:17,111 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:38:17,112 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:38:17,113 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:38:17,113 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:38:17,116 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:38:17,116 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:38:17,117 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:38:17,117 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:38:17,124 - uvicorn.error - INFO - Started server process [75016]
2025-05-17 15:38:17,125 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:38:17,125 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:38:17,166 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:38:20,283 - uvicorn.error - INFO - ('127.0.0.1', 58771) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:38:20,286 - uvicorn.error - INFO - connection open
2025-05-17 15:38:27,051 - uvicorn.error - INFO - ('127.0.0.1', 58785) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:38:27,054 - uvicorn.error - INFO - connection open
2025-05-17 15:39:00,291 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 373, in agent_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 394, in agent_websocket_endpoint
    manager.disconnect(websocket, env_id)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 171, in disconnect
    del self.agent_connections[env_id][agent_id]
        ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
KeyError: None
2025-05-17 15:39:00,515 - uvicorn.error - INFO - connection closed
2025-05-17 15:39:49,212 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:39:50,959 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:41:52,855 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:41:52,856 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:41:52,890 - uvicorn.error - INFO - Shutting down
2025-05-17 15:41:52,892 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 419, in agent_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1012, None)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 473, in agent_websocket_endpoint
    await manager.broadcast_to_game(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RoTKConnectionManager' object has no attribute 'broadcast_to_game'. Did you mean: 'broadcast_to_agent'?
2025-05-17 15:41:53,116 - uvicorn.error - INFO - connection closed
2025-05-17 15:41:53,117 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:41:53,117 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:41:53,118 - uvicorn.error - INFO - Finished server process [75016]
2025-05-17 15:41:53,482 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:41:53,525 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:41:53,526 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:41:53,527 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:41:53,527 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:41:53,530 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:41:53,530 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:41:53,531 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:41:53,531 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:41:53,541 - uvicorn.error - INFO - Started server process [76050]
2025-05-17 15:41:53,541 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:41:53,542 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:41:53,843 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:41:57,774 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:41:57,775 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:41:57,786 - uvicorn.error - INFO - Shutting down
2025-05-17 15:41:57,888 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:41:57,890 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:41:57,892 - uvicorn.error - INFO - Finished server process [76050]
2025-05-17 15:41:58,192 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:41:58,193 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:41:58,194 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:41:58,194 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:41:58,196 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:41:58,197 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:41:58,197 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:41:58,198 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:41:58,206 - uvicorn.error - INFO - Started server process [76077]
2025-05-17 15:41:58,206 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:41:58,207 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:41:58,313 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:42:06,870 - uvicorn.error - INFO - ('127.0.0.1', 59096) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:42:06,873 - uvicorn.error - INFO - connection open
2025-05-17 15:42:15,275 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 419, in agent_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1000, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 473, in agent_websocket_endpoint
    await manager.broadcast_to_game(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RoTKConnectionManager' object has no attribute 'broadcast_to_game'. Did you mean: 'broadcast_to_agent'?
2025-05-17 15:42:15,506 - uvicorn.error - INFO - connection closed
2025-05-17 15:42:37,006 - uvicorn.error - INFO - Shutting down
2025-05-17 15:42:37,109 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:42:37,113 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:42:37,115 - uvicorn.error - INFO - Finished server process [76077]
2025-05-17 15:42:37,123 - uvicorn.error - INFO - Stopping reloader process [70867]
2025-05-17 15:42:43,470 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:42:43,471 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:42:43,471 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:42:43,471 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:42:43,474 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:42:43,474 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:42:43,475 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:42:43,475 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:42:43,533 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/own/Workspace/GameServer']
2025-05-17 15:42:43,534 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-05-17 15:42:43,535 - uvicorn.error - INFO - Started reloader process [76402] using WatchFiles
2025-05-17 15:42:43,816 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:42:43,817 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:42:43,817 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:42:43,818 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:42:43,820 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:42:43,821 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:42:43,821 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:42:43,821 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:42:43,829 - uvicorn.error - INFO - Started server process [76404]
2025-05-17 15:42:43,830 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:42:43,830 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:42:45,867 - uvicorn.error - INFO - ('127.0.0.1', 59140) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:42:45,871 - uvicorn.error - INFO - connection open
2025-05-17 15:42:54,497 - uvicorn.error - INFO - ('127.0.0.1', 59146) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:42:54,501 - uvicorn.error - INFO - connection open
2025-05-17 15:43:00,418 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:43:03,018 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:43:25,876 - uvicorn.error - INFO - connection closed
2025-05-17 15:43:54,509 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 419, in agent_websocket_endpoint
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 473, in agent_websocket_endpoint
    await manager.broadcast_to_game(
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RoTKConnectionManager' object has no attribute 'broadcast_to_game'. Did you mean: 'broadcast_to_agent'?
2025-05-17 15:43:54,739 - uvicorn.error - INFO - connection closed
2025-05-17 15:44:16,297 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:44:16,299 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:44:16,342 - uvicorn.error - INFO - Shutting down
2025-05-17 15:44:16,444 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:44:16,445 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:44:16,446 - uvicorn.error - INFO - Finished server process [76404]
2025-05-17 15:44:16,813 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:44:16,855 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:44:16,856 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:16,857 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:16,857 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:16,860 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:44:16,860 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:16,861 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:16,861 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:16,870 - uvicorn.error - INFO - Started server process [76883]
2025-05-17 15:44:16,871 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:44:16,872 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:44:17,175 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:44:29,572 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:44:29,573 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:44:29,602 - uvicorn.error - INFO - Shutting down
2025-05-17 15:44:29,705 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:44:29,706 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:44:29,706 - uvicorn.error - INFO - Finished server process [76883]
2025-05-17 15:44:30,071 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:44:30,179 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:44:30,181 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:30,181 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:30,182 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:30,185 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:44:30,185 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:30,186 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:30,186 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:30,200 - uvicorn.error - INFO - Started server process [76981]
2025-05-17 15:44:30,201 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:44:30,201 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:44:30,481 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:44:30,482 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:44:30,506 - uvicorn.error - INFO - Shutting down
2025-05-17 15:44:30,608 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:44:30,609 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:44:30,609 - uvicorn.error - INFO - Finished server process [76981]
2025-05-17 15:44:30,921 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:44:30,923 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:30,924 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:30,924 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:30,927 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:44:30,928 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:44:30,928 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:44:30,929 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:44:30,939 - uvicorn.error - INFO - Started server process [76990]
2025-05-17 15:44:30,940 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:44:30,941 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:44:31,023 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:46:03,072 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:46:05,303 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:47:09,112 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:47:09,113 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:47:09,210 - uvicorn.error - INFO - Shutting down
2025-05-17 15:47:09,313 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:47:09,314 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:47:09,315 - uvicorn.error - INFO - Finished server process [76990]
2025-05-17 15:47:09,679 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:47:09,780 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:47:09,782 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:09,783 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:09,783 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:09,789 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:47:09,790 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:09,790 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:09,791 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:09,808 - uvicorn.error - INFO - Started server process [77793]
2025-05-17 15:47:09,809 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:47:09,810 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:47:10,043 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:47:22,486 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:47:22,487 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:47:22,531 - uvicorn.error - INFO - Shutting down
2025-05-17 15:47:22,635 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:47:22,638 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:47:22,639 - uvicorn.error - INFO - Finished server process [77793]
2025-05-17 15:47:22,955 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:47:22,957 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:22,957 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:22,958 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:22,960 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:47:22,961 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:22,961 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:22,962 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:22,972 - uvicorn.error - INFO - Started server process [77862]
2025-05-17 15:47:22,973 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:47:22,974 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:47:23,054 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:47:34,300 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:47:34,301 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:47:34,384 - uvicorn.error - INFO - Shutting down
2025-05-17 15:47:34,486 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:47:34,488 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:47:34,489 - uvicorn.error - INFO - Finished server process [77862]
2025-05-17 15:47:34,804 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:47:34,806 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:34,807 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:34,807 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:34,810 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:47:34,810 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:34,811 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:34,811 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:34,821 - uvicorn.error - INFO - Started server process [77933]
2025-05-17 15:47:34,822 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:47:34,823 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:47:34,909 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:47:56,659 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:47:56,660 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:47:56,746 - uvicorn.error - INFO - Shutting down
2025-05-17 15:47:56,848 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:47:56,848 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:47:56,849 - uvicorn.error - INFO - Finished server process [77933]
2025-05-17 15:47:57,164 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:47:57,166 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:57,167 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:57,167 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:57,170 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:47:57,171 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:47:57,171 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:47:57,171 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:47:57,183 - uvicorn.error - INFO - Started server process [78036]
2025-05-17 15:47:57,183 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:47:57,184 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:47:57,269 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:48:03,618 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:48:03,619 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:48:03,646 - uvicorn.error - INFO - Shutting down
2025-05-17 15:48:03,748 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:48:03,750 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:48:03,751 - uvicorn.error - INFO - Finished server process [78036]
2025-05-17 15:48:04,097 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:48:04,098 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:04,099 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:04,100 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:04,103 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:48:04,103 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:04,104 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:04,104 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:04,116 - uvicorn.error - INFO - Started server process [78088]
2025-05-17 15:48:04,116 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:48:04,118 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:48:04,119 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:48:04,475 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:48:15,406 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:48:15,407 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:48:15,427 - uvicorn.error - INFO - Shutting down
2025-05-17 15:48:15,529 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:48:15,531 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:48:15,532 - uvicorn.error - INFO - Finished server process [78088]
2025-05-17 15:48:15,864 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:48:15,866 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:15,867 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:15,867 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:15,871 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:48:15,871 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:15,872 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:15,872 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:15,884 - uvicorn.error - INFO - Started server process [78143]
2025-05-17 15:48:15,886 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:48:15,887 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:48:15,951 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:48:21,978 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:48:21,979 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 15:48:22,050 - uvicorn.error - INFO - Shutting down
2025-05-17 15:48:22,152 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:48:22,153 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:48:22,154 - uvicorn.error - INFO - Finished server process [78143]
2025-05-17 15:48:22,466 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:48:22,468 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:22,468 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:22,468 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:22,471 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:48:22,471 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:48:22,472 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:48:22,472 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:48:22,481 - uvicorn.error - INFO - Started server process [78186]
2025-05-17 15:48:22,482 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:48:22,482 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:48:22,570 - watchfiles.main - INFO - 4 changes detected
2025-05-17 15:48:30,440 - uvicorn.error - INFO - ('127.0.0.1', 59861) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:48:30,444 - uvicorn.error - INFO - connection open
2025-05-17 15:49:10,448 - uvicorn.error - INFO - connection closed
2025-05-17 15:49:17,275 - uvicorn.error - INFO - ('127.0.0.1', 59958) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:49:17,278 - uvicorn.error - INFO - connection open
2025-05-17 15:49:37,749 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:49:40,094 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:51:37,453 - uvicorn.error - INFO - ('127.0.0.1', 60154) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:51:37,457 - uvicorn.error - INFO - connection open
2025-05-17 15:52:07,158 - uvicorn.error - INFO - connection closed
2025-05-17 15:52:32,567 - uvicorn.error - INFO - connection closed
2025-05-17 15:52:36,572 - uvicorn.error - INFO - ('127.0.0.1', 60212) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:52:36,575 - uvicorn.error - INFO - connection open
2025-05-17 15:52:39,186 - uvicorn.error - INFO - connection closed
2025-05-17 15:52:43,886 - uvicorn.error - INFO - ('127.0.0.1', 60216) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:52:43,890 - uvicorn.error - INFO - connection open
2025-05-17 15:52:49,007 - uvicorn.error - INFO - ('127.0.0.1', 60227) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:52:49,010 - uvicorn.error - INFO - connection open
2025-05-17 15:52:54,346 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:52:56,048 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:53:23,894 - uvicorn.error - INFO - connection closed
2025-05-17 15:53:49,017 - uvicorn.error - INFO - connection closed
2025-05-17 15:56:17,065 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:56:17,067 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:56:17,112 - uvicorn.error - INFO - Shutting down
2025-05-17 15:56:17,215 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:56:17,216 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:56:17,216 - uvicorn.error - INFO - Finished server process [78186]
2025-05-17 15:56:17,535 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:56:17,537 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:56:17,537 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:56:17,538 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:56:17,541 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:56:17,542 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:56:17,542 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:56:17,543 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:56:17,554 - uvicorn.error - INFO - Started server process [80462]
2025-05-17 15:56:17,555 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:56:17,556 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:56:17,578 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:56:37,786 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:56:39,440 - watchfiles.main - INFO - 3 changes detected
2025-05-17 15:56:49,207 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:56:49,208 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 15:56:49,277 - uvicorn.error - INFO - Shutting down
2025-05-17 15:56:49,379 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 15:56:49,380 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 15:56:49,381 - uvicorn.error - INFO - Finished server process [80462]
2025-05-17 15:56:49,708 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 15:56:49,710 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:56:49,710 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:56:49,711 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:56:49,714 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 15:56:49,714 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 15:56:49,715 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 15:56:49,715 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 15:56:49,722 - uvicorn.error - INFO - Started server process [80643]
2025-05-17 15:56:49,723 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 15:56:49,724 - uvicorn.error - INFO - Application startup complete.
2025-05-17 15:56:49,748 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:57:47,202 - uvicorn.error - INFO - ('127.0.0.1', 60652) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:57:47,205 - uvicorn.error - INFO - connection open
2025-05-17 15:58:22,416 - uvicorn.error - INFO - connection closed
2025-05-17 15:58:25,281 - uvicorn.error - INFO - ('127.0.0.1', 60706) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:58:25,284 - uvicorn.error - INFO - connection open
2025-05-17 15:58:40,977 - uvicorn.error - INFO - ('127.0.0.1', 60724) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 15:58:40,980 - uvicorn.error - INFO - connection open
2025-05-17 15:58:53,842 - uvicorn.error - INFO - connection closed
2025-05-17 15:58:59,852 - uvicorn.error - INFO - ('127.0.0.1', 60759) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 15:58:59,855 - uvicorn.error - INFO - connection open
2025-05-17 15:59:20,986 - uvicorn.error - INFO - connection closed
2025-05-17 15:59:39,481 - watchfiles.main - INFO - 1 change detected
2025-05-17 15:59:41,663 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:02:10,032 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:02:10,033 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:02:10,127 - uvicorn.error - INFO - Shutting down
2025-05-17 16:02:10,129 - uvicorn.error - INFO - connection closed
2025-05-17 16:02:10,230 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:02:10,231 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:02:10,231 - uvicorn.error - INFO - Finished server process [80643]
2025-05-17 16:02:10,554 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:02:10,556 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:02:10,556 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:02:10,557 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:02:10,559 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:02:10,560 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:02:10,560 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:02:10,561 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:02:10,595 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:02:10,612 - uvicorn.error - INFO - Started server process [82176]
2025-05-17 16:02:10,612 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:02:10,613 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:02:10,956 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:02:31,378 - uvicorn.error - INFO - ('127.0.0.1', 61171) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:02:31,381 - uvicorn.error - INFO - connection open
2025-05-17 16:02:34,735 - uvicorn.error - INFO - ('127.0.0.1', 61176) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 16:02:34,738 - uvicorn.error - INFO - connection open
2025-05-17 16:02:51,878 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:02:53,681 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:04:26,407 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:04:26,409 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:04:26,433 - uvicorn.error - INFO - Shutting down
2025-05-17 16:04:26,434 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/Users/own/.local/share/uv/python/cpython-3.13.2-macos-aarch64-none/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/Users/own/.local/share/uv/python/cpython-3.13.2-macos-aarch64-none/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 331, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: sent 1012 (service restart); no close frame received

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 344, in asgi_send
    raise ClientDisconnected from exc
uvicorn.protocols.utils.ClientDisconnected

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 243, in run_asgi
    result = await self.app(self.scope, self.asgi_receive, self.asgi_send)  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 152, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 77, in __call__
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 362, in handle
    await self.app(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 95, in app
    await wrap_app_handling_exceptions(app, session)(scope, receive, send)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/routing.py", line 93, in app
    await func(session)
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 405, in agent_websocket_endpoint
    await manager.broadcast_to_agent(
    ...<6 lines>...
    )
  File "/Users/own/Workspace/GameServer/gameserver/ws/endpoints/rotk.py", line 191, in broadcast_to_agent
    await connection.send_text(json.dumps(message))
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/Users/own/Workspace/GameServer/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 88, in send
    raise WebSocketDisconnect(code=1006)
starlette.websockets.WebSocketDisconnect
2025-05-17 16:04:26,900 - uvicorn.error - INFO - connection closed
2025-05-17 16:04:26,901 - uvicorn.error - INFO - connection closed
2025-05-17 16:04:26,903 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:04:26,903 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:04:26,904 - uvicorn.error - INFO - Finished server process [82176]
2025-05-17 16:04:27,226 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:04:27,228 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:27,228 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:27,229 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:27,231 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:04:27,232 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:27,232 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:27,233 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:27,242 - uvicorn.error - INFO - Started server process [82844]
2025-05-17 16:04:27,243 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:04:27,244 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:04:27,321 - watchfiles.main - INFO - 4 changes detected
2025-05-17 16:04:40,902 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:04:40,903 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:04:40,972 - uvicorn.error - INFO - Shutting down
2025-05-17 16:04:41,072 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:04:41,073 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:04:41,074 - uvicorn.error - INFO - Finished server process [82844]
2025-05-17 16:04:41,389 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:04:41,391 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:41,391 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:41,392 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:41,395 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:04:41,396 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:41,396 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:41,397 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:41,408 - uvicorn.error - INFO - Started server process [82916]
2025-05-17 16:04:41,409 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:04:41,411 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:04:41,491 - watchfiles.main - INFO - 4 changes detected
2025-05-17 16:04:49,973 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:04:49,973 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:04:49,994 - uvicorn.error - INFO - Shutting down
2025-05-17 16:04:50,097 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:04:50,098 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:04:50,098 - uvicorn.error - INFO - Finished server process [82916]
2025-05-17 16:04:50,406 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:04:50,408 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:50,409 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:50,409 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:50,412 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:04:50,412 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:50,412 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:50,413 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:50,422 - uvicorn.error - INFO - Started server process [82975]
2025-05-17 16:04:50,422 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:04:50,423 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:04:50,517 - watchfiles.main - INFO - 4 changes detected
2025-05-17 16:04:50,879 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:04:50,880 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:04:50,928 - uvicorn.error - INFO - Shutting down
2025-05-17 16:04:51,029 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:04:51,031 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:04:51,031 - uvicorn.error - INFO - Finished server process [82975]
2025-05-17 16:04:51,351 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:04:51,353 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:51,354 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:51,354 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:51,357 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:04:51,358 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:04:51,358 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:04:51,359 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:04:51,370 - uvicorn.error - INFO - Started server process [82978]
2025-05-17 16:04:51,370 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:04:51,372 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:04:51,452 - watchfiles.main - INFO - 4 changes detected
2025-05-17 16:05:01,779 - uvicorn.error - INFO - ('127.0.0.1', 61652) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:05:01,783 - uvicorn.error - INFO - connection open
2025-05-17 16:05:06,848 - uvicorn.error - INFO - ('127.0.0.1', 61671) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 16:05:06,851 - uvicorn.error - INFO - connection open
2025-05-17 16:05:53,753 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:05:55,393 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:05:57,460 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:05:57,461 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:05:57,523 - uvicorn.error - INFO - Shutting down
2025-05-17 16:05:57,525 - uvicorn.error - INFO - connection closed
2025-05-17 16:05:57,527 - uvicorn.error - INFO - connection closed
2025-05-17 16:05:57,626 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:05:57,628 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:05:57,629 - uvicorn.error - INFO - Finished server process [82978]
2025-05-17 16:05:57,994 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:05:58,033 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:05:58,034 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:05:58,035 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:05:58,035 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:05:58,038 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:05:58,039 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:05:58,039 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:05:58,040 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:05:58,048 - uvicorn.error - INFO - Started server process [83327]
2025-05-17 16:05:58,049 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:05:58,050 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:06:02,174 - uvicorn.error - INFO - ('127.0.0.1', 61817) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:06:02,177 - uvicorn.error - INFO - connection open
2025-05-17 16:06:35,563 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:06:35,564 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:06:35,616 - uvicorn.error - INFO - Shutting down
2025-05-17 16:06:35,617 - uvicorn.error - INFO - connection closed
2025-05-17 16:06:35,717 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:06:35,719 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:06:35,720 - uvicorn.error - INFO - Finished server process [83327]
2025-05-17 16:06:36,021 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:06:36,023 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:06:36,023 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:06:36,023 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:06:36,026 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:06:36,026 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:06:36,027 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:06:36,027 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:06:36,034 - uvicorn.error - INFO - Started server process [83515]
2025-05-17 16:06:36,034 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:06:36,035 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:06:36,085 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:06:39,218 - uvicorn.error - INFO - ('127.0.0.1', 61889) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:06:39,221 - uvicorn.error - INFO - connection open
2025-05-17 16:06:45,170 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:06:45,172 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:06:45,226 - uvicorn.error - INFO - Shutting down
2025-05-17 16:06:45,228 - uvicorn.error - INFO - connection closed
2025-05-17 16:06:45,328 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:06:45,329 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:06:45,330 - uvicorn.error - INFO - Finished server process [83515]
2025-05-17 16:06:45,703 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:06:45,723 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:06:45,725 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:06:45,726 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:06:45,726 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:06:45,729 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:06:45,730 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:06:45,730 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:06:45,731 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:06:45,738 - uvicorn.error - INFO - Started server process [83572]
2025-05-17 16:06:45,739 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:06:45,740 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:06:48,780 - uvicorn.error - INFO - ('127.0.0.1', 61918) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:06:48,784 - uvicorn.error - INFO - connection open
2025-05-17 16:06:56,529 - uvicorn.error - INFO - ('127.0.0.1', 61935) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 16:06:56,532 - uvicorn.error - INFO - connection open
2025-05-17 16:07:09,825 - uvicorn.error - INFO - connection closed
2025-05-17 16:07:12,564 - uvicorn.error - INFO - connection closed
2025-05-17 16:07:34,917 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:07:34,919 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:07:34,935 - uvicorn.error - INFO - Shutting down
2025-05-17 16:07:35,036 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:07:35,038 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:07:35,039 - uvicorn.error - INFO - Finished server process [83572]
2025-05-17 16:07:35,403 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:07:35,421 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:07:35,423 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:35,423 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:35,423 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:35,427 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:07:35,427 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:35,427 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:35,428 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:35,435 - uvicorn.error - INFO - Started server process [83825]
2025-05-17 16:07:35,436 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:07:35,436 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:07:42,602 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:07:42,603 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:07:42,607 - uvicorn.error - INFO - Shutting down
2025-05-17 16:07:42,709 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:07:42,710 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:07:42,711 - uvicorn.error - INFO - Finished server process [83825]
2025-05-17 16:07:43,059 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:07:43,061 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:43,061 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:43,062 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:43,064 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:07:43,065 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:43,065 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:43,066 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:43,069 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:07:43,073 - uvicorn.error - INFO - Started server process [83876]
2025-05-17 16:07:43,074 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:07:43,076 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:07:57,500 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:07:57,501 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:07:57,520 - uvicorn.error - INFO - Shutting down
2025-05-17 16:07:57,623 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:07:57,627 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:07:57,628 - uvicorn.error - INFO - Finished server process [83876]
2025-05-17 16:07:57,956 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:07:57,958 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:57,958 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:57,959 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:57,961 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:07:57,962 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:07:57,962 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:07:57,962 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:07:57,969 - uvicorn.error - INFO - Started server process [83953]
2025-05-17 16:07:57,969 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:07:57,970 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:07:57,999 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:08:01,131 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:08:01,131 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:08:01,205 - uvicorn.error - INFO - Shutting down
2025-05-17 16:08:01,308 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:08:01,308 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:08:01,309 - uvicorn.error - INFO - Finished server process [83953]
2025-05-17 16:08:01,607 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:08:01,608 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:08:01,609 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:08:01,609 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:08:01,612 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:08:01,612 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:08:01,613 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:08:01,613 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:08:01,620 - uvicorn.error - INFO - Started server process [83973]
2025-05-17 16:08:01,621 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:08:01,621 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:08:01,668 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:08:02,659 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:08:02,660 - uvicorn.error - WARNING - WatchFiles detected changes in 'examples/demo_ws_rotk_env.py'. Reloading...
2025-05-17 16:08:02,734 - uvicorn.error - INFO - Shutting down
2025-05-17 16:08:02,838 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:08:02,841 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:08:02,872 - uvicorn.error - INFO - Finished server process [83973]
2025-05-17 16:08:03,172 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:08:03,173 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:08:03,174 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:08:03,174 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:08:03,176 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:08:03,177 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:08:03,177 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:08:03,178 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:08:03,184 - uvicorn.error - INFO - Started server process [83988]
2025-05-17 16:08:03,185 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:08:03,186 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:08:03,240 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:08:12,844 - uvicorn.error - INFO - ('127.0.0.1', 62065) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:08:12,846 - uvicorn.error - INFO - connection open
2025-05-17 16:08:18,615 - uvicorn.error - INFO - ('127.0.0.1', 62084) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 16:08:18,618 - uvicorn.error - INFO - connection open
2025-05-17 16:08:52,851 - uvicorn.error - INFO - connection closed
2025-05-17 16:09:18,626 - uvicorn.error - INFO - connection closed
2025-05-17 16:09:36,532 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:09:38,281 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:10:34,109 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:10:34,110 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:10:34,192 - uvicorn.error - INFO - Shutting down
2025-05-17 16:10:34,294 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:10:34,294 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:10:34,295 - uvicorn.error - INFO - Finished server process [83988]
2025-05-17 16:10:34,613 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:10:34,615 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:10:34,616 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:10:34,616 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:10:34,620 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:10:34,620 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:10:34,620 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:10:34,621 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:10:34,632 - uvicorn.error - INFO - Started server process [84734]
2025-05-17 16:10:34,633 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:10:34,634 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:10:34,715 - watchfiles.main - INFO - 4 changes detected
2025-05-17 16:10:49,157 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:10:49,158 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:10:49,179 - uvicorn.error - INFO - Shutting down
2025-05-17 16:10:49,281 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:10:49,282 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:10:49,283 - uvicorn.error - INFO - Finished server process [84734]
2025-05-17 16:10:49,634 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:10:49,636 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:10:49,636 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:10:49,637 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:10:49,639 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:10:49,640 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:10:49,640 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:10:49,640 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:10:49,642 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:10:49,650 - uvicorn.error - INFO - Started server process [84813]
2025-05-17 16:10:49,650 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:10:49,651 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:10:50,006 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:12:38,359 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:12:40,636 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:13:49,088 - uvicorn.error - INFO - ('127.0.0.1', 62522) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:13:49,091 - uvicorn.error - INFO - connection open
2025-05-17 16:13:55,195 - uvicorn.error - INFO - ('127.0.0.1', 62531) - "WebSocket /ws/env/1/agent/1" [accepted]
2025-05-17 16:13:55,196 - uvicorn.error - INFO - connection open
2025-05-17 16:14:02,033 - uvicorn.error - INFO - connection closed
2025-05-17 16:14:04,113 - uvicorn.error - INFO - ('127.0.0.1', 62538) - "WebSocket /ws/env/1/agent/0" [accepted]
2025-05-17 16:14:04,117 - uvicorn.error - INFO - connection open
2025-05-17 16:14:35,200 - uvicorn.error - INFO - connection closed
2025-05-17 16:14:44,121 - uvicorn.error - INFO - connection closed
2025-05-17 16:14:55,417 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:14:55,418 - uvicorn.error - WARNING - WatchFiles detected changes in 'gameserver/ws/endpoints/rotk.py'. Reloading...
2025-05-17 16:14:55,439 - uvicorn.error - INFO - Shutting down
2025-05-17 16:14:55,541 - uvicorn.error - INFO - Waiting for application shutdown.
2025-05-17 16:14:55,542 - uvicorn.error - INFO - Application shutdown complete.
2025-05-17 16:14:55,543 - uvicorn.error - INFO - Finished server process [84813]
2025-05-17 16:14:55,872 - agent_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/agent_api_20250517.log
2025-05-17 16:14:55,873 - agent_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:14:55,874 - agent_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:14:55,874 - agent_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:14:55,877 - rotk_api - INFO - Logging to file: /Users/own/Workspace/GameServer/gameserver/storage/logs/rotk_api_20250517.log
2025-05-17 16:14:55,877 - rotk_api - INFO - Storage path: /Users/own/Workspace/GameServer/gameserver/storage
2025-05-17 16:14:55,878 - rotk_api - INFO - Memory space: /Users/own/Workspace/GameServer/gameserver/storage/memory
2025-05-17 16:14:55,878 - rotk_api - INFO - Role path: /Users/own/Workspace/GameServer/gameserver/storage/configs/roles
2025-05-17 16:14:55,914 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:14:55,930 - uvicorn.error - INFO - Started server process [86000]
2025-05-17 16:14:55,930 - uvicorn.error - INFO - Waiting for application startup.
2025-05-17 16:14:55,931 - uvicorn.error - INFO - Application startup complete.
2025-05-17 16:14:56,276 - watchfiles.main - INFO - 3 changes detected
2025-05-17 16:39:32,537 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:47:45,521 - watchfiles.main - INFO - 1 change detected
2025-05-17 16:47:47,471 - watchfiles.main - INFO - 3 changes detected
2025-05-17 17:49:25,275 - watchfiles.main - INFO - 1 change detected
2025-05-17 17:49:27,987 - watchfiles.main - INFO - 3 changes detected
2025-05-17 18:18:45,540 - watchfiles.main - INFO - 1 change detected
2025-05-17 18:18:50,007 - watchfiles.main - INFO - 3 changes detected
2025-05-17 18:42:48,896 - watchfiles.main - INFO - 1 change detected
2025-05-17 18:42:51,986 - watchfiles.main - INFO - 3 changes detected
2025-05-17 18:42:54,495 - uvicorn.error - INFO - Shutting down
2025-05-17 18:42:54,623 - uvicorn.error - INFO - Finished server process [86000]
2025-05-17 18:42:54,651 - uvicorn.error - INFO - Stopping reloader process [76402]
